<div class='listing-container'>
  <!-- All header contents -->
  <header class="listing-header">
    <a href="<%= listing.url %>" target="_blank"><h1><%= listing.title %></h1></a>
    <div class="listing-information">
      <% const flair = listing.flair_text %>
      <% if(flair === 'SELLING') { %>
        <div class="selling-flair"></div>
      <% } else if(flair === 'BUYING') { %>
        <div class="buying-flair"></div>
      <% } else if(flair === 'TRADING') { %>
        <div class="trading-flair"></div>
      <% } else { %>
        <div class="store-flair"></div>
      <% } %>
      <p class="listing-author">
        <a href="http://reddit.com/user/<%= listing.author %>" target="_blank">u/<%= listing.author %></a>
      </p>
      <p class="date"><%= listing.date %></p>
      <p><%= listing.location %></p>
    </div>
  </header>

  <!-- All Timestamp Contents -->
   <% if(listing.timestamp !== '') { %>
    <section class="timestamp-display">
      <div class="timestamp-title">
        <h2>Timestamp Gallery</h2>
      </div>

      <div class="timestamp-link">
        <a href="<%= listing.timestamp %>" target="_blank">[TIMESTAMP]</a>
      </div>
    </section>
  <% } %>

  <!-- All listing details -->
  <section class="selftext-display">
    <div class="selftext-title">
      <h2>Listing Details</h2>
    </div>

    <div class="selftext-content">
      <p><%- listing.self_text %></p>
    </div>
  </section>

  <!-- All comments -->
  <% if(user) { %>
    <section class="comments-section">
      <header class="comments-header">
        <p>Comments</p>
      </header>

      <!-- Display all comments that exist -->
      <% if(comments) { %>
        <section class="comments-display">
        <% comments.forEach(item => { %>
          <p><%= item.comment %> | <a href="/listings/<%= listing.page_id %>/edit">Edit Comment</a></p>
          <form method="POST", action="/listings/<%= listing.page_id %>/delete/?_method=DELETE">
            <input type="hidden" name="comment" value="<%= item.id %>">
            <button type="submit" class="btn delete-btn">Delete</button>
          </form>
          <% }) %>
        </section>
      <% } %>

      <!-- Display input for comments -->
      <form action="/listings/<%= listing.page_id %>" method="POST">
        <label for="comment">Message u/<%= listing.author %> for further information</label>
        <textarea id="comment" name="comment" class="comment-input"></textarea> 
  
        <button type="submit" class="btn message-btn">Message</button>
      </form>
    </section>
  <% } else { %>
    <section class="comments-section">
      <header class="comments-header">
        <p>Comments</p>
      </header>
      <p>You must be logged in to send any comments.</p>
    </section>
  <% } %>

</div>